/*
---
title: Mixin underline
name: mixin-underline
parent: mixin
---
If you set the variable in ems, be carefull. Firefox doesn't like dimensions <1px.
`$var * base-font-size > 1px`
```scss
@mixin underline {...}
```
*/
@mixin underline ($underline-color: #333, $underline-position: 1px, $underline-width: 1px, $underline-background-color: #ffffff, $underline-shadow-width: $underline-width) {

  // remove classic underline
  text-decoration: none;

  // the underline
  background: linear-gradient(to top, $underline-background-color, $underline-background-color $underline-position, $underline-color $underline-position, $underline-color $underline-position+$underline-width, $underline-background-color $underline-position+$underline-width);

  // text-shadow
  // why so much ?! -> http://dsh.re/14297
  $precision: 5;
  $all: ();
  @for $i from 1 through $precision {
    $distance: $underline-shadow-width*$i/$precision;
    $all: append($all, 0 $distance 0 $underline-background-color, comma);
    $all: append($all, 0 (-$distance) 0 $underline-background-color, comma);
    $all: append($all, $distance 0 0 $underline-background-color, comma);
    $all: append($all, (-$distance) 0 0 $underline-background-color, comma);
    $all: append($all, (-$distance) (-$distance) 0 $underline-background-color,comma);
    $all: append($all, (-$distance) $distance 0 $underline-background-color,comma);
    $all: append($all, $distance (-$distance) 0 $underline-background-color,comma);
    $all: append($all, $distance $distance 0 $underline-background-color,comma);
  }
  text-shadow: $all;
}
